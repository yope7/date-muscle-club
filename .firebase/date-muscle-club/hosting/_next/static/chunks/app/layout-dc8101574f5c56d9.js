(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{39685:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,78346,23)),Promise.resolve().then(t.bind(t,47433)),Promise.resolve().then(t.bind(t,88766)),Promise.resolve().then(t.bind(t,65881)),Promise.resolve().then(t.bind(t,54999))},47433:(e,r,t)=>{"use strict";t.d(r,{Header:()=>P});var l=t(95155),n=t(12115),o=t(6874),a=t.n(o),s=t(66681),i=t(16324),d=t(27943),c=t(71169),u=t(30529),h=t(700),p=t(54581),g=t(3127),x=t(42663),m=t(11247),y=t(15808),A=t(56278),j=t(54492),f=t(99927),b=t(27088),v=t(4472),k=t(5653),w=t(4915),C=t(67192),E=t(71977),S=t(68534),D=t(91567);let I=e=>{let{open:r,onClose:t}=e,{calendarDisplayMode:n,setCalendarDisplayMode:o}=(0,D.C)();return(0,l.jsxs)(A.A,{open:r,onClose:t,maxWidth:"sm",fullWidth:!0,children:[(0,l.jsx)(j.A,{children:"設定"}),(0,l.jsx)(f.A,{children:(0,l.jsxs)(b.A,{component:"fieldset",sx:{mt:2},children:[(0,l.jsx)(v.A,{component:"legend",children:"カレンダー表示モード"}),(0,l.jsxs)(k.A,{value:n,onChange:e=>{o(e.target.value)},children:[(0,l.jsx)(w.A,{value:"color",control:(0,l.jsx)(C.A,{}),label:"色で表示（回数に応じて色が濃くなる）"}),(0,l.jsx)(w.A,{value:"fire",control:(0,l.jsx)(C.A,{}),label:"炎アイコンで表示（回数に応じて大きくなる）"})]})]})}),(0,l.jsx)(E.A,{children:(0,l.jsx)(S.A,{onClick:t,children:"閉じる"})})]})},P=()=>{let{user:e,signIn:r,signOut:t}=(0,s.A)(),o=(0,i.A)(),A=(0,d.A)(o.breakpoints.down("sm")),[j,f]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{e&&console.log("ユーザー情報:",{displayName:e.displayName,email:e.email,photoURL:e.photoURL})},[e]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(c.A,{component:"nav",position:"static",children:(0,l.jsxs)(u.A,{children:[(0,l.jsx)(a(),{href:"/",style:{textDecoration:"none",color:"inherit"},children:(0,l.jsx)(h.A,{variant:A?"h6":"h5",component:"h1",fontWeight:"bold",children:"Date Muscle Club"})}),(0,l.jsx)(p.A,{sx:{flexGrow:1}}),(0,l.jsxs)(p.A,{sx:{display:"flex",alignItems:"center",gap:2},children:[(0,l.jsx)(g.A,{color:"inherit",onClick:()=>f(!0),"aria-label":"設定",children:(0,l.jsx)(m.A,{})}),e?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(a(),{href:"/mypage",style:{color:"inherit"},children:(0,l.jsx)(g.A,{color:"inherit","aria-label":"マイページ",children:(0,l.jsx)(x.A,{src:e.photoURL||void 0,alt:e.displayName||e.email||"ユーザー",sx:{width:32,height:32}})})}),(0,l.jsx)(g.A,{color:"inherit",onClick:t,"aria-label":"ログアウト",children:(0,l.jsx)(y.A,{})})]}):(0,l.jsx)(g.A,{color:"inherit",onClick:r,"aria-label":"ログイン",children:(0,l.jsx)(x.A,{sx:{width:32,height:32}})})]})]})}),(0,l.jsx)(I,{open:j,onClose:()=>f(!1)})]})}},54999:(e,r,t)=>{"use strict";t.d(r,{WorkoutStoreProvider:()=>d});var l=t(95155),n=t(12115),o=t(35317),a=t(56104),s=t(65881);let i=(0,n.createContext)({selectedDate:null,setSelectedDate:()=>{},workouts:[],addWorkout:()=>{}}),d=e=>{let{children:r}=e,[t,d]=(0,n.useState)(null),[c,u]=(0,n.useState)([]),{user:h}=(0,s.A)();(0,n.useEffect)(()=>{if(!h)return void u([]);let e=(0,o.P)((0,o.rJ)(a.db,"workouts"),(0,o._M)("userId","==",h.uid)),r=(0,o.aQ)(e,e=>{u(e.docs.map(e=>{var r,t,l;let n=e.data();return{...e.data(),id:e.id,date:(null==(r=n.date)?void 0:r.toDate())||new Date,createdAt:(null==(t=n.createdAt)?void 0:t.toDate())||new Date,updatedAt:(null==(l=n.updatedAt)?void 0:l.toDate())||new Date}}))});return()=>r()},[h]);let p=async e=>{};return(0,l.jsx)(i.Provider,{value:{selectedDate:t,setSelectedDate:d,workouts:c,addWorkout:p},children:r})}},56104:(e,r,t)=>{"use strict";let l;t.d(r,{db:()=>d,j:()=>i});var n=t(23915),o=t(16203),a=t(35317);let s={apiKey:"***REMOVED***B3VrSH5rtQqm2C0vPVAubhZxXGZgwfLbg",authDomain:"date-muscle-club.firebaseapp.com",projectId:"date-muscle-club",storageBucket:"date-muscle-club.firebasestorage.app",messagingSenderId:"148397492251",appId:"1:148397492251:web:49ed3676e84a36387bd0be"};console.log("Firebase Config:",{...s,apiKey:s.apiKey?"***":void 0}),0===(0,n.Dk)().length?(console.log("Initializing new Firebase app"),l=(0,n.Wp)(s)):(console.log("Using existing Firebase app"),l=(0,n.Dk)()[0]);let i=(0,o.xI)(l),d=(0,a.aU)(l);console.log("Firebase initialized with:",{app:l.name,auth:i.app.name,db:d.app.name})},65881:(e,r,t)=>{"use strict";t.d(r,{A:()=>s,AuthProvider:()=>i});var l=t(95155),n=t(12115),o=t(56104);let a=(0,n.createContext)({user:null,loading:!0}),s=()=>(0,n.useContext)(a),i=e=>{let{children:r}=e,[t,s]=(0,n.useState)(null),[i,d]=(0,n.useState)(!0);return(0,n.useEffect)(()=>{let e=o.j.onAuthStateChanged(e=>{s(e),d(!1)});return()=>e()},[]),(0,l.jsx)(a.Provider,{value:{user:t,loading:i},children:r})}},66681:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});var l=t(12115),n=t(16203),o=t(56104);let a=(0,t(65453).v)(e=>({user:null,loading:!0,error:null,signInWithGoogle:async()=>{e({loading:!0,error:null});let r=new n.HF;try{await (0,n.df)(o.j,r)}catch(r){console.error("Error signing in with Google:",r),"auth/popup-closed-by-user"===r.code?e({error:"ログインがキャンセルされました"}):"auth/popup-blocked"===r.code?e({error:"ポップアップがブロックされています。ブラウザの設定を確認してください"}):e({error:"ログインに失敗しました。もう一度お試しください"})}finally{e({loading:!1})}},signInAsGuest:async()=>{e({loading:!0,error:null});try{await (0,n.zK)(o.j)}catch(r){console.error("Error signing in as guest:",r),e({error:"ゲストログインに失敗しました"})}finally{e({loading:!1})}},signOut:async()=>{e({loading:!0,error:null});try{await (0,n.CI)(o.j)}catch(r){console.error("Error signing out:",r),e({error:"ログアウトに失敗しました"})}finally{e({loading:!1})}},signIn:async()=>{e({loading:!0,error:null});let r=new n.HF;try{await (0,n.df)(o.j,r)}catch(r){console.error("Error signing in:",r),"auth/popup-closed-by-user"===r.code?e({error:"ログインがキャンセルされました"}):"auth/popup-blocked"===r.code?e({error:"ポップアップがブロックされています。ブラウザの設定を確認してください"}):e({error:"ログインに失敗しました。もう一度お試しください"})}finally{e({loading:!1})}},clearError:()=>e({error:null})})),s=()=>{let[e,r]=(0,l.useState)(a.getState());return(0,l.useEffect)(()=>{let e=a.subscribe(r);return()=>e()},[]),(0,l.useEffect)(()=>{let e=(0,n.hg)(o.j,e=>{a.setState({user:e,loading:!1})});return()=>e()},[]),e};s.getState=a.getState},88766:(e,r,t)=>{"use strict";t.d(r,{default:()=>g});var l=t(95155),n=t(12115),o=t(25041),a=t(35695),s=t(64453),i=t(33196),d=t(22548),c=t(40364),u=t(99007),h=t.n(u);let p=(0,c.A)({palette:{mode:"dark",primary:{main:"#EF4444"},background:{default:"#121212",paper:"#1E1E1E"}},typography:{fontFamily:h().style.fontFamily},components:{MuiAppBar:{defaultProps:{elevation:0},styleOverrides:{root:{backgroundColor:"#1E1E1E"}}}}});function g(e){let{children:r}=e,[{cache:t,flush:c}]=(0,n.useState)(()=>{let e=(0,o.A)({key:"mui",prepend:!0});e.compat=!0;let r=e.insert,t=[];return e.insert=function(){for(var l=arguments.length,n=Array(l),o=0;o<l;o++)n[o]=arguments[o];let a=n[1];return void 0===e.inserted[a.name]&&t.push(a.name),r(...n)},{cache:e,flush:()=>{let e=t;return t=[],e}}});return(0,a.useServerInsertedHTML)(()=>{let e=c();if(0===e.length)return null;let r="";for(let l of e)r+=t.inserted[l];return(0,l.jsx)("style",{"data-emotion":"".concat(t.key," ").concat(e.join(" ")),dangerouslySetInnerHTML:{__html:r}},t.key)}),(0,l.jsx)(s.C,{value:t,children:(0,l.jsxs)(i.A,{theme:p,children:[(0,l.jsx)(d.Ay,{}),r]})})}},91567:(e,r,t)=>{"use strict";t.d(r,{C:()=>o});var l=t(65453),n=t(46786);let o=(0,l.v)()((0,n.Zr)(e=>({calendarDisplayMode:"color",setCalendarDisplayMode:r=>e({calendarDisplayMode:r}),displayMode:"color",setDisplayMode:r=>e({displayMode:r})}),{name:"settings-storage"}))}},e=>{var r=r=>e(e.s=r);e.O(0,[592,992,965,719,823,23,441,684,358],()=>r(39685)),_N_E=e.O()}]);