# ベンチプレス記録アプリ仕様書（v0.2）

## 概要
本アプリは、ユーザーがベンチプレスのトレーニング内容を日々記録・可視化できるスマートフォン対応のWebアプリケーションである。Firebaseをバックエンドとし、UIはシンプルかつシックなデザインを採用する。

---

## 1. 対象ユーザー
- 自身のトレーニングを記録・振り返りたいユーザー
- 知人やトレーナーと進捗を共有したいユーザー（最大2名想定）

---

## 2. コア機能

### 2.1 トレーニング記録機能
- 対象種目：ベンチプレス（他種目は当面追加しない）
- 記録単位：1日
- 記録項目：
  - セット記録（複数）：`重量（kg）× 回数（rep）`
  - 自由記述メモ（その日の体調や所感）
  - 任意のタグ付け（例：「フォーム意識」「軽め」など）
- 入力形式：フォームベース（スマホ対応）

### 2.2 カレンダーUI
- 初期表示：月単位
- 各日の状態表示：
  - トレーニングを実施した日にはマークを表示
  - 各日の「負荷スコア（重量×回数の合計）」に応じた色分けまたはアイコン表示
  - 表示モード切替機能：
    - カラー表示：負荷スコアに応じた色分け
    - フレーム表示：負荷スコアに応じた炎アイコンのサイズ変更

### 2.3 記録詳細・編集・削除
- カレンダーから該当日を選択 → 記録の詳細確認・編集・削除が可能
- 別途「履歴一覧」画面を用意し、日付順で記録を縦スクロール表示可能

### 2.4 グラフによる可視化
- 以下の指標を元に日ごとの推移を可視化：
  - 最高重量の推移
  - 1日の総挙上量（全セットの合計）
  - 1日あたりの総セット数・平均回数
- 期間選択機能：
  - 1週間
  - 1ヶ月（デフォルト）
  - 3ヶ月
  - すべて
- グラフ表示機能：
  - レスポンシブ対応（画面サイズに応じて自動調整）
  - グリッド線表示
  - ツールチップ（ホバー時に詳細表示）
  - 軸ラベル表示
  - 日付順にデータを表示

### 2.5 ユーザー管理
- Firebase Authentication によるログイン機能
  - Google認証
  - 匿名ログイン（ゲスト利用）
- 記録はユーザーごとに分離され，他人の記録は閲覧不可
- ユーザープロフィール表示：
  - プロフィール画像（Google認証から取得）
  - 表示名（Google認証から取得）
  - メールアドレス（Google認証から取得）

### 2.6 共有機能
- 任意の相手に共有権限を付与可能（メールアドレスなどで設定）
- 共有相手の記録は別の「閲覧専用の一覧画面」から確認可能
- 自分のカレンダーと混在させない設計

---

## 3. デザイン・UX

### 3.1 テーマ
- シックで落ち着いたダークテーマ（黒・赤・グレー系）を初期採用
- ライトテーマとの切り替え対応（手動 or 自動）を将来的に実装予定

### 3.2 モチベーション演出（拡張予定）
- 継続日数表示
- 「最高重量更新時」の祝賀アニメーション・バッジ表示
- 月間総挙上量や記録日数の集計表示

---

## 4. 今後の拡張予定

| 分類           | 内容                                                                 |
|----------------|----------------------------------------------------------------------|
| 通知機能       | 毎日定時リマインド通知／共有相手の更新通知（Firebase Cloud Messaging） |
| エクスポート   | 記録データをCSVで出力可能に（Google Drive連携等）                    |
| 比較機能       | 共有相手との比較グラフ表示（最高重量・挙上量など）                    |
| 他種目対応     | スクワット，デッドリフトなどを選択可能に（データスキーマ拡張）         |
| 検索・フィルタ | タグ・期間・負荷スコアなどで絞り込み表示                             |
| SNS連携        | 投稿や自己ベストのシェア（X/Instagramなど）                           |

---

## 5. 技術スタック（実装済み）

| 技術カテゴリ    | 使用技術                          |
|-----------------|----------------------------------|
| フロントエンド  | React / Next.js（SP対応）        |
| バックエンド    | Firebase Authentication / Firestore |
| グラフ描画      | Recharts                        |
| デプロイ        | Firebase Hosting                |
| 状態管理        | Zustand                         |
| UIフレームワーク| Material-UI                     |
| 日付操作        | date-fns                        |

---

## 6. セキュリティ・データ管理

- Firestore ルールによってユーザー単位のアクセス制御を徹底
- 匿名ログイン時もデータをクラウドに保持し，後から引き継ぎ可能な設計も検討

---

## 7. 開発フェーズ構成（実装済み）

1. ✅ Firebase構成・ユーザー認証
2. ✅ カレンダーUIと記録機能（MVP）
3. ✅ 記録詳細と履歴一覧の整備
4. ✅ グラフ表示と負荷スコア算出
5. ✅ ダーク/ライトテーマ切替
6. ⏳ 共有相手閲覧機能の追加
7. ⏳ 拡張機能の段階的追加（通知・タグ検索など）

---

## 8. データ構造

### 8.1 トレーニング記録
```typescript
interface Workout {
  id: string;
  userId: string;
  date: Date;
  sets: {
    weight: number;
    reps: number;
  }[];
  memo?: string;
  tags?: string[];
  createdAt: Date;
  updatedAt: Date;
}
```

### 8.2 ユーザー設定
```typescript
interface Settings {
  userId: string;
  displayMode: 'color' | 'flame';
  theme: 'light' | 'dark';
  createdAt: Date;
  updatedAt: Date;
}
```

---

## 9. パフォーマンス最適化

- グラフデータの計算に`useMemo`を使用
- コンポーネントの適切な分割
- レスポンシブデザインの実装
- 画像の最適化（プロフィール画像など）

---
